---
title: API Reference
---

<!-- gomarkdoc:embed:start -->

<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# jsonschema

```go
import "github.com/tylergannon/go-gen-jsonschema"
```

## Index

- [type DataType](<#DataType>)
- [type EnumMode](<#EnumMode>)
- [type EnumType](<#EnumType>)
  - [func NewEnumType\[T \~string\]\(\) EnumType](<#NewEnumType>)
- [type InterfaceMarker](<#InterfaceMarker>)
  - [func NewInterfaceImpl\[T any\]\(...T\) InterfaceMarker](<#NewInterfaceImpl>)
- [type JSONSchema](<#JSONSchema>)
  - [func \(s JSONSchema\) MarshalJSON\(\) \(\[\]byte, error\)](<#JSONSchema.MarshalJSON>)
- [type JSONUnionType](<#JSONUnionType>)
  - [func \(j JSONUnionType\) MarshalJSON\(\) \(\[\]byte, error\)](<#JSONUnionType.MarshalJSON>)
- [type ObjectSchema](<#ObjectSchema>)
  - [func \(s \*ObjectSchema\) AddProperty\(key string, value SchemaNode\)](<#ObjectSchema.AddProperty>)
  - [func \(s \*ObjectSchema\) AddRequiredProperty\(key string, value SchemaNode\)](<#ObjectSchema.AddRequiredProperty>)
  - [func \(s ObjectSchema\) MarshalJSON\(\) \(\[\]byte, error\)](<#ObjectSchema.MarshalJSON>)
- [type ParentSchema](<#ParentSchema>)
  - [func \(s \*ParentSchema\) AddDefinition\(key string, value SchemaNode\)](<#ParentSchema.AddDefinition>)
  - [func \(s ParentSchema\) MarshalJSON\(\) \(\[\]byte, error\)](<#ParentSchema.MarshalJSON>)
- [type SchemaFunction](<#SchemaFunction>)
- [type SchemaMarker](<#SchemaMarker>)
  - [func NewJSONSchemaBuilder\[T any\]\(SchemaFunction\) SchemaMarker](<#NewJSONSchemaBuilder>)
  - [func NewJSONSchemaBuilderFor\(\_ any, \_ SchemaFunction, \_ ...SchemaMethodOption\) SchemaMarker](<#NewJSONSchemaBuilderFor>)
  - [func NewJSONSchemaFunc\[T any\]\(f SchemaMethod\[T\], \_ ...SchemaMethodOption\) SchemaMarker](<#NewJSONSchemaFunc>)
  - [func NewJSONSchemaMethod\[T any\]\(SchemaMethod\[T\], ...SchemaMethodOption\) SchemaMarker](<#NewJSONSchemaMethod>)
- [type SchemaMethod](<#SchemaMethod>)
- [type SchemaMethodOption](<#SchemaMethodOption>)
  - [func WithDiscriminator\[T any\]\(field T, name string\) SchemaMethodOption](<#WithDiscriminator>)
  - [func WithEnum\[T any\]\(field T\) SchemaMethodOption](<#WithEnum>)
  - [func WithEnumMode\(mode EnumMode\) SchemaMethodOption](<#WithEnumMode>)
  - [func WithEnumName\[T any\]\(value T, name string\) SchemaMethodOption](<#WithEnumName>)
  - [func WithFunction\[T any\]\(val T, f func\(T\) json.Marshaler\) SchemaMethodOption](<#WithFunction>)
  - [func WithInterface\[T any\]\(field T\) SchemaMethodOption](<#WithInterface>)
  - [func WithInterfaceImpls\[T any\]\(field T, impls ...any\) SchemaMethodOption](<#WithInterfaceImpls>)
  - [func WithRenderProviders\(\) SchemaMethodOption](<#WithRenderProviders>)
  - [func WithStructAccessorMethod\[T, U any\]\(val T, f func\(U\) json.Marshaler\) SchemaMethodOption](<#WithStructAccessorMethod>)
  - [func WithStructFunctionMethod\[T, U any\]\(val U, f func\(T, U\) json.Marshaler\) SchemaMethodOption](<#WithStructFunctionMethod>)
- [type SchemaMethodOptionObj](<#SchemaMethodOptionObj>)
- [type SchemaNode](<#SchemaNode>)
  - [func ArraySchema\(items SchemaNode, description string\) SchemaNode](<#ArraySchema>)
  - [func BoolSchema\(description string\) SchemaNode](<#BoolSchema>)
  - [func ConstSchema\[T \~int | \~string\]\(val T, description string\) SchemaNode](<#ConstSchema>)
  - [func EnumSchema\[T \~int | \~string\]\(description string, vals ...T\) SchemaNode](<#EnumSchema>)
  - [func IntSchema\(description string\) SchemaNode](<#IntSchema>)
  - [func RefSchemaEl\(ref string\) SchemaNode](<#RefSchemaEl>)
  - [func StringSchema\(description string\) SchemaNode](<#StringSchema>)
  - [func UnionSchemaEl\(alts ...SchemaNode\) SchemaNode](<#UnionSchemaEl>)
- [type SchemaProperty](<#SchemaProperty>)


<a name="DataType"></a>
## type [DataType](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/json_schema.go#L10>)



```go
type DataType string
```

<a name="Object"></a>

```go
const (
    Object  DataType = "object"
    Number  DataType = "number"
    Integer DataType = "integer"
    String  DataType = "string"
    Array   DataType = "array"
    Null    DataType = "null"
    Boolean DataType = "boolean"
)
```

<a name="EnumMode"></a>
## type [EnumMode](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/union_type.go#L86>)

Enum options \(v1\) \- stubs for scanning/type\-checking; parsed by scanner

```go
type EnumMode int
```

<a name="EnumStrings"></a>

```go
const (
    EnumStrings EnumMode = iota + 1
)
```

<a name="EnumType"></a>
## type [EnumType](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/union_type.go#L8>)



```go
type EnumType struct{}
```

<a name="NewEnumType"></a>
### func [NewEnumType](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/union_type.go#L132>)

```go
func NewEnumType[T ~string]() EnumType
```

NewEnumType denotes that the type argument should be an enum. If called in the same package where the type is declared, then it applies globally. In all cases, the const values MUST be declared in the same package as the call to NewEnumType.

For now, only string types are supported.

<a name="InterfaceMarker"></a>
## type [InterfaceMarker](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/union_type.go#L11>)



```go
type InterfaceMarker struct{}
```

<a name="NewInterfaceImpl"></a>
### func [NewInterfaceImpl](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/union_type.go#L121>)

```go
func NewInterfaceImpl[T any](...T) InterfaceMarker
```

NewInterfaceImpl marks the arguments as possible implementations for the interface type given in the type argument.

1. If called in the same package as the interface itself, then all global instances can be replaced.
2. If called somewhere else, only applies to the local package.

<a name="JSONSchema"></a>
## type [JSONSchema](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/json_schema.go#L208-L236>)

JSONSchema is a struct for describing a JSON Schema. It is fairly limited, and you may have better luck using a third\-party library. This is a copy from go\-openai's "jsonschema.Definition\{\}" struct, with the difference being that this one holds references to json.Marshaler, rather than to itself.

```go
type JSONSchema struct {
    // Type specifies the data type of the schema.
    Type DataType `json:"type" yaml:"type"`
    // Description is the description of the schema.
    Description string `json:"description,omitempty" yaml:"description,omitempty"`
    // Enum is used to restrict a value to a fixed set of values. It must be an
    // array with at least one element, where each element is unique. You will
    // probably only use this with strings.
    Enum []any `json:"enum,omitempty" yaml:"enum,omitempty"`
    // Properties describes the properties of an object, if the schema type is
    // Object.
    Properties map[string]SchemaNode `json:"properties,omitempty" yaml:"properties,omitempty"`
    // Required specifies which properties are required, if the schema type is
    // Object.
    Required []string `json:"required,omitempty" yaml:"required,omitempty"`
    // Items specifies which data type an array contains, if the schema type is
    // Array.
    Items SchemaNode `json:"items,omitempty" yaml:"items,omitempty"`
    // AdditionalProperties is used to control the handling of properties in an
    // object that are not explicitly defined in the properties section of the
    // schema. example: additionalProperties: true additionalProperties: false
    // additionalProperties: jsonschema.Definition{Type: jsonschema.String}
    AdditionalProperties any                   `json:"additionalProperties,omitempty" yaml:"additionalProperties,omitempty"`
    Definitions          map[string]SchemaNode `json:"$defs,omitzero" yaml:"$defs,omitempty"`
    Const                any                   `json:"const,omitempty"` // Provide a const value
    // Strict will make all properties required and additionalProperties: false if
    // not already set. pplies only if Type = "object".
    Strict bool `json:"-" yaml:"-"`
}
```

<a name="JSONSchema.MarshalJSON"></a>
### func \(JSONSchema\) [MarshalJSON](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/json_schema.go#L238>)

```go
func (s JSONSchema) MarshalJSON() ([]byte, error)
```



<a name="JSONUnionType"></a>
## type [JSONUnionType](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/json_schema.go#L24>)



```go
type JSONUnionType []*JSONSchema
```

<a name="JSONUnionType.MarshalJSON"></a>
### func \(JSONUnionType\) [MarshalJSON](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/json_schema.go#L27>)

```go
func (j JSONUnionType) MarshalJSON() ([]byte, error)
```

MarshalJSON implements json.Marshaler.

<a name="ObjectSchema"></a>
## type [ObjectSchema](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/json_schema.go#L114-L120>)



```go
type ObjectSchema struct {
    Properties           []SchemaProperty
    Strict               bool
    Required             []string
    Description          string
    AdditionalProperties any
}
```

<a name="ObjectSchema.AddProperty"></a>
### func \(\*ObjectSchema\) [AddProperty](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/json_schema.go#L122>)

```go
func (s *ObjectSchema) AddProperty(key string, value SchemaNode)
```



<a name="ObjectSchema.AddRequiredProperty"></a>
### func \(\*ObjectSchema\) [AddRequiredProperty](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/json_schema.go#L126>)

```go
func (s *ObjectSchema) AddRequiredProperty(key string, value SchemaNode)
```



<a name="ObjectSchema.MarshalJSON"></a>
### func \(ObjectSchema\) [MarshalJSON](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/json_schema.go#L194>)

```go
func (s ObjectSchema) MarshalJSON() ([]byte, error)
```



<a name="ParentSchema"></a>
## type [ParentSchema](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/json_schema.go#L57-L63>)



```go
type ParentSchema struct {
    *ObjectSchema
    Definitions []SchemaProperty
    // The key name for the definitions map.  Defaults to "definitions"
    DefinitionsKeyName string `json:"-"`
    Title              string `json:"title,omitzero"`
}
```

<a name="ParentSchema.AddDefinition"></a>
### func \(\*ParentSchema\) [AddDefinition](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/json_schema.go#L110>)

```go
func (s *ParentSchema) AddDefinition(key string, value SchemaNode)
```



<a name="ParentSchema.MarshalJSON"></a>
### func \(ParentSchema\) [MarshalJSON](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/json_schema.go#L65>)

```go
func (s ParentSchema) MarshalJSON() ([]byte, error)
```



<a name="SchemaFunction"></a>
## type [SchemaFunction](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/union_type.go#L13>)



```go
type SchemaFunction func() json.RawMessage
```

<a name="SchemaMarker"></a>
## type [SchemaMarker](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/union_type.go#L9>)



```go
type SchemaMarker struct{}
```

<a name="NewJSONSchemaBuilder"></a>
### func [NewJSONSchemaBuilder](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/union_type.go#L23>)

```go
func NewJSONSchemaBuilder[T any](SchemaFunction) SchemaMarker
```

NewJSONSchemaBuilder registers a function as being a stub that should be implemented with a proper json schema and, as needed, unmarshaler functionality.

<a name="NewJSONSchemaBuilderFor"></a>
### func [NewJSONSchemaBuilderFor](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/union_type.go#L30>)

```go
func NewJSONSchemaBuilderFor(_ any, _ SchemaFunction, _ ...SchemaMethodOption) SchemaMarker
```

NewJSONSchemaBuilderFor registers a zero\-arg builder function for the given example instance value \(e.g., TypeName\{\}\), allowing type inference without generics.

<a name="NewJSONSchemaFunc"></a>
### func [NewJSONSchemaFunc](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/union_type.go#L104>)

```go
func NewJSONSchemaFunc[T any](f SchemaMethod[T], _ ...SchemaMethodOption) SchemaMarker
```

NewJSONSchemaFunc registers a free function that takes the receiver as its sole parameter as a schema entrypoint. It is equivalent to NewJSONSchemaMethod.

<a name="NewJSONSchemaMethod"></a>
### func [NewJSONSchemaMethod](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/union_type.go#L98>)

```go
func NewJSONSchemaMethod[T any](SchemaMethod[T], ...SchemaMethodOption) SchemaMarker
```

NewJSONSchemaMethod registers a struct method as a stub that will be implemented with a proper json schema and, as needed, unmarshaler functionality.

<a name="SchemaMethod"></a>
## type [SchemaMethod](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/union_type.go#L15>)



```go
type SchemaMethod[T any] func(T) json.RawMessage
```

<a name="SchemaMethodOption"></a>
## type [SchemaMethodOption](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/union_type.go#L34-L36>)



```go
type SchemaMethodOption interface {
    // contains filtered or unexported methods
}
```

<a name="WithDiscriminator"></a>
### func [WithDiscriminator](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/union_type.go#L81>)

```go
func WithDiscriminator[T any](field T, name string) SchemaMethodOption
```



<a name="WithEnum"></a>
### func [WithEnum](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/union_type.go#L92>)

```go
func WithEnum[T any](field T) SchemaMethodOption
```



<a name="WithEnumMode"></a>
### func [WithEnumMode](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/union_type.go#L93>)

```go
func WithEnumMode(mode EnumMode) SchemaMethodOption
```



<a name="WithEnumName"></a>
### func [WithEnumName](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/union_type.go#L94>)

```go
func WithEnumName[T any](value T, name string) SchemaMethodOption
```



<a name="WithFunction"></a>
### func [WithFunction](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/union_type.go#L60>)

```go
func WithFunction[T any](val T, f func(T) json.Marshaler) SchemaMethodOption
```



<a name="WithInterface"></a>
### func [WithInterface](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/union_type.go#L77>)

```go
func WithInterface[T any](field T) SchemaMethodOption
```

Interface options \(v1\) \- stubs for scanning/type\-checking; parsed by scanner

<a name="WithInterfaceImpls"></a>
### func [WithInterfaceImpls](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/union_type.go#L78>)

```go
func WithInterfaceImpls[T any](field T, impls ...any) SchemaMethodOption
```



<a name="WithRenderProviders"></a>
### func [WithRenderProviders](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/union_type.go#L19>)

```go
func WithRenderProviders() SchemaMethodOption
```

WithRenderProviders requests generation of RenderedSchema\(\) and provider execution at runtime.

<a name="WithStructAccessorMethod"></a>
### func [WithStructAccessorMethod](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/union_type.go#L68>)

```go
func WithStructAccessorMethod[T, U any](val T, f func(U) json.Marshaler) SchemaMethodOption
```



<a name="WithStructFunctionMethod"></a>
### func [WithStructFunctionMethod](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/union_type.go#L64>)

```go
func WithStructFunctionMethod[T, U any](val U, f func(T, U) json.Marshaler) SchemaMethodOption
```



<a name="SchemaMethodOptionObj"></a>
## type [SchemaMethodOptionObj](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/union_type.go#L72>)



```go
type SchemaMethodOptionObj struct{}
```

<a name="SchemaNode"></a>
## type [SchemaNode](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/json_schema.go#L12>)



```go
type SchemaNode = json.Marshaler
```

<a name="ArraySchema"></a>
### func [ArraySchema](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/json_schema.go#L296>)

```go
func ArraySchema(items SchemaNode, description string) SchemaNode
```



<a name="BoolSchema"></a>
### func [BoolSchema](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/json_schema.go#L314>)

```go
func BoolSchema(description string) SchemaNode
```



<a name="ConstSchema"></a>
### func [ConstSchema](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/json_schema.go#L261>)

```go
func ConstSchema[T ~int | ~string](val T, description string) SchemaNode
```



<a name="EnumSchema"></a>
### func [EnumSchema](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/json_schema.go#L279>)

```go
func EnumSchema[T ~int | ~string](description string, vals ...T) SchemaNode
```



<a name="IntSchema"></a>
### func [IntSchema](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/json_schema.go#L321>)

```go
func IntSchema(description string) SchemaNode
```



<a name="RefSchemaEl"></a>
### func [RefSchemaEl](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/json_schema.go#L48>)

```go
func RefSchemaEl(ref string) SchemaNode
```

A ref into definitions

<a name="StringSchema"></a>
### func [StringSchema](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/json_schema.go#L307>)

```go
func StringSchema(description string) SchemaNode
```



<a name="UnionSchemaEl"></a>
### func [UnionSchemaEl](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/json_schema.go#L41>)

```go
func UnionSchemaEl(alts ...SchemaNode) SchemaNode
```

An anyOf element

<a name="SchemaProperty"></a>
## type [SchemaProperty](<https://github.com/tylergannon/go-gen-jsonschema/blob/main/json_schema.go#L52-L55>)



```go
type SchemaProperty struct {
    Key   string
    Value SchemaNode
}
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)


<!-- gomarkdoc:embed:end -->